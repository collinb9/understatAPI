

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>understatAPI &mdash; understatAPI 0.1.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Welcome to understatAPI’s documentation!" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> understatAPI
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">understatAPI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#quick-start">Quick Start</a></li>
<li class="toctree-l2"><a class="reference internal" href="#contributing">Contributing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#versioning">Versioning</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#todo">TODO</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">understatAPI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>understatAPI</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/README.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="understatapi">
<h1>understatAPI<a class="headerlink" href="#understatapi" title="Permalink to this headline">¶</a></h1>
<p>This is a python API for scraping data from <a class="reference external" href="https://understat.com/">understat.com</a>. Understat is a website with football data for 6 european leagues for every season since 2014/15 season. The leagues available are the Premier League, La Liga, Ligue 1, Serie A, Bundesliga and the Russian Premier League.</p>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>To install the package run</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install understatapi
</pre></div>
</div>
<p>If you would like to use the package with the latest development changes you can clone this repo and install the package</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone git@github.com:collinb9/understatAPI understatAPI
<span class="nb">cd</span> understatAPI
python setup.py install
</pre></div>
</div>
</div>
<div class="section" id="quick-start">
<h2>Quick Start<a class="headerlink" href="#quick-start" title="Permalink to this headline">¶</a></h2>
<hr class="docutils" />
<p><strong>NOTE</strong></p>
<p>This package is in very early stages of development and the API is likely to change</p>
<hr class="docutils" />
<p>The API contains endpoints which reflect the structure of the understat website. Below is a table showing the different endpoints and the pages on understat.com to which they correspond</p>
<p>| Endpoint         | Webpage                                         |
|——————|————————————————-|
| UnderstatClient.league | https://understat.com/league/&lt;league_name&gt;      |
| UnderstatClient.team   | https://understat.com/team/&lt;team_name&gt;/<season> |
| UnderstatClient.player | https://understat.com/player/&lt;player_id&gt;        |
| UnderstatClient.match  | https://understat.com/player/&lt;match_id&gt;         |</p>
<p>Every function in the public API corresponds to one of tables visible on the understat webpage corresponding to the endpoint to which it belongs. Each function returns a pandas <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> with the relevant data. Below are some examples of using the API. Note how some the functions in the <code class="docutils literal notranslate"><span class="pre">league</span></code> and <code class="docutils literal notranslate"><span class="pre">team</span></code> endpoints can accept understandable strings as identifiers, but <code class="docutils literal notranslate"><span class="pre">player</span></code> and <code class="docutils literal notranslate"><span class="pre">match</span></code> must receive an id number.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">understatapi</span> <span class="kn">import</span> <span class="n">UnderstatClient</span>

<span class="n">understat</span> <span class="o">=</span> <span class="n">UnderstatClient</span><span class="p">()</span>
<span class="c1"># get data for every player playing in the Premier League in 2019/20</span>
<span class="n">league_player_data</span> <span class="o">=</span> <span class="n">understat</span><span class="o">.</span><span class="n">league</span><span class="o">.</span><span class="n">get_player_data</span><span class="p">(</span><span class="n">league</span><span class="o">=</span><span class="s2">&quot;EPL&quot;</span><span class="p">,</span> <span class="n">season</span><span class="o">=</span><span class="s2">&quot;2019&quot;</span><span class="p">)</span>
<span class="c1"># Get the name and id of the player with the highest xG this season</span>
<span class="c1"># First we need to change the type of the &#39;xG&#39; column, by default it is a string</span>
<span class="n">league_player_data</span><span class="p">[</span><span class="s2">&quot;xG&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">league_player_data</span><span class="p">[</span><span class="s2">&quot;xG&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
<span class="n">league_player_data</span> <span class="o">=</span> <span class="n">league_player_data</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">&quot;xG&quot;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">player_id</span><span class="p">,</span> <span class="n">player_name</span> <span class="o">=</span> <span class="n">league_player_data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][[</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;player_name&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span>
<span class="c1"># Get data for every shot this player has taken in a league match (for all seasons)</span>
<span class="n">player_shot_data</span> <span class="o">=</span> <span class="n">understat</span><span class="o">.</span><span class="n">player</span><span class="o">.</span><span class="n">get_shot_data</span><span class="p">(</span><span class="n">player</span><span class="o">=</span><span class="n">player_id</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">understatapi</span> <span class="kn">import</span> <span class="n">UnderstatClient</span>

<span class="n">understat</span> <span class="o">=</span> <span class="n">UnderstatClient</span><span class="p">()</span>
<span class="c1"># get data for every league match involving Manchester United</span>
<span class="n">team_match_data</span> <span class="o">=</span> <span class="n">understat</span><span class="o">.</span><span class="n">team</span><span class="o">.</span><span class="n">get_match_data</span><span class="p">(</span><span class="n">team</span><span class="o">=</span><span class="s2">&quot;Manchester_United&quot;</span><span class="p">,</span> <span class="n">season</span><span class="o">=</span><span class="s2">&quot;2019&quot;</span><span class="p">)</span>
<span class="c1"># get the id for the first match of the season</span>
<span class="n">match_id</span> <span class="o">=</span> <span class="n">match_data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
<span class="c1"># get the rosters for the both teams in that match</span>
<span class="n">roster_data</span> <span class="o">=</span> <span class="n">understat</span><span class="o">.</span><span class="n">match</span><span class="o">.</span><span class="n">get_roster_data</span><span class="p">(</span><span class="n">match</span><span class="o">=</span><span class="n">match_id</span><span class="p">)</span>
</pre></div>
</div>
<p>You can also use the <code class="docutils literal notranslate"><span class="pre">UnderstatClient</span></code> class as a context manager which persists some information about the session between request and closes the session after it has been used. This is the recommended way to interact with the API.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">understatapi</span> <span class="kn">import</span> <span class="n">UnderstatClient</span>

<span class="k">with</span> <span class="n">UnderstatClient</span><span class="p">()</span> <span class="k">as</span> <span class="n">understat</span><span class="p">:</span>
    <span class="n">team_match_data</span> <span class="o">=</span> <span class="n">understat</span><span class="o">.</span><span class="n">team</span><span class="o">.</span><span class="n">get_match_data</span>
</pre></div>
</div>
<p>There are some more examples here TODO: Add more examples and link to them
For a full API reference, see the documentation TODO: Add link to docs</p>
</div>
<div class="section" id="contributing">
<h2>Contributing<a class="headerlink" href="#contributing" title="Permalink to this headline">¶</a></h2>
<p>If you find any bugs in the code or have any feature requests, please make an issue and I’ll try to address it as soon as possible. If you would like to implement the changes yourself you can make a pull request</p>
<ul class="simple">
<li><p>Clone this repo <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">git&#64;github.com:collinb9/understatAPI</span></code></p></li>
<li><p>Create a branch to work off <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span> <span class="pre">-b</span> <span class="pre">descriptive_branch_name</span></code></p></li>
<li><p>Make and commit your changes</p></li>
<li><p>Push your changes <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">push</span></code></p></li>
<li><p>Come back to this page, and click on Pull requests -&gt; New pull request</p></li>
</ul>
<p>Before a pull request can be merged the code will have to pass a number of checks that are run using TravisCI. These checks are</p>
<ul class="simple">
<li><p>Check that the code has been formatted using <a class="reference external" href="https://github.com/psf/black">black</a></p></li>
<li><p>Lint the code using <a class="reference external" href="https://github.com/PyCQA/pylint">pylint</a></p></li>
<li><p>Check type annotations using <a class="reference external" href="https://github.com/python/mypy">mypy</a></p></li>
<li><p>Run the unit tests and check that they have 100% coverage</p></li>
</ul>
<p>These checks are in place to ensure a consistent style and quality across the code. To check if the changes you have made will pass these tests run</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install -r requirements.txt
pip install -r test_requirments.txt
chmod +x ./run_tests.sh
./run_tests.sh
</pre></div>
</div>
<p>Don’t let these tests deter you from making a pull request. Make the changes to introduce the new functionality/bug fix and then I will be happy to help get the code to a stage where it passes the tests.</p>
</div>
<div class="section" id="versioning">
<h2>Versioning<a class="headerlink" href="#versioning" title="Permalink to this headline">¶</a></h2>
<p>The versioning for this project follows the <a class="reference external" href="https://semver.org/">semantic versioning</a> conventions.</p>
</div>
</div>
<div class="section" id="todo">
<h1>TODO<a class="headerlink" href="#todo" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Add functionality for using the search bar on understat</p></li>
<li><p>Make <code class="docutils literal notranslate"><span class="pre">APIClient</span></code> a context manager that allows you to persist a session</p></li>
<li><p>Creat an async API along with the current synchronous one</p></li>
</ul>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to understatAPI’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Brendan Collins.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>