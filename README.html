

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>understatAPI &mdash; understatAPI 0.5.2 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> understatAPI
          

          
          </a>

          
            
            
              <div class="version">
                0.5.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="index.html">understatAPI Home</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_index.html">API Referance</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">understatAPI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>understatAPI</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/README.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <a class="reference external image-reference" href="https://travis-ci.com/collinb9/understatAPI"><img alt="Build Status" src="https://travis-ci.com/collinb9/understatAPI.svg?branch=master" /></a>
<a class="reference external image-reference" href="https://img.shields.io/pypi/v/understatapi"><img alt="PyPI" src="https://img.shields.io/pypi/v/understatapi" /></a>
<a class="reference external image-reference" href="https://img.shields.io/pypi/l/understatapi"><img alt="PyPI - License" src="https://img.shields.io/pypi/l/understatapi" /></a>
<section id="understatapi">
<h1>understatAPI<a class="headerlink" href="#understatapi" title="Permalink to this headline">¶</a></h1>
<p>This is a python API for scraping data from <a class="reference external" href="https://understat.com/">understat.com</a>. Understat is a website with football data for 6 european leagues for every season since 2014/15 season. The leagues available are the Premier League, La Liga, Ligue 1, Serie A, Bundesliga and the Russian Premier League.</p>
<hr class="docutils" />
<p><strong>NOTE</strong></p>
<p>I am not affiliated with understat.com in any way</p>
<hr class="docutils" />
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>To install the package run</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install understatapi
</pre></div>
</div>
<p>If you would like to use the package with the latest development changes you can clone this repo and install the package</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone git@github.com:collinb9/understatAPI understatAPI
<span class="nb">cd</span> understatAPI
python setup.py install
</pre></div>
</div>
<p>This package primarily uses the <a class="reference external" href="https://github.com/psf/requests">requests</a> library for interacting with understat.com, but the method <code class="docutils literal notranslate"><span class="pre">UnderstatClient.search()</span></code>, which allows you to use the search bar, is implemented using <a class="reference external" href="https://github.com/SeleniumHQ/selenium/tree/trunk/py">selenium</a>.
If you wish to use this method then you will have to install <a class="reference external" href="https://github.com/mozilla/geckodriver">geckodriver</a>.</p>
</section>
<section id="getting-started">
<h2>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<hr class="docutils" />
<p><strong>NOTE</strong></p>
<p>This package is in early stages of development and the API is likely to change</p>
<hr class="docutils" />
<p>The API contains endpoints which reflect the structure of the understat website. Below is a table showing the different endpoints and the pages on understat.com to which they correspond</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Endpoint</p></th>
<th class="head"><p>Webpage</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>UnderstatClient.league</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">https://understat.com/league/&lt;league_name&gt;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>UnderstatClient.team</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">https://understat.com/team/&lt;team_name&gt;/&lt;season&gt;</span></code></p></td>
</tr>
<tr class="row-even"><td><p>UnderstatClient.player</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">https://understat.com/player/&lt;player_id&gt;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>UnderstatClient.match</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">https://understat.com/match/&lt;match_id&gt;</span></code></p></td>
</tr>
</tbody>
</table>
<p>Every mwthod in the public API corresponds to one of the tables visible on the understat page for the relevant endpoint.
Each method returns JSON with the relevant data. Below are some examples of how to use the API. Note how the <code class="docutils literal notranslate"><span class="pre">league()</span></code> and <code class="docutils literal notranslate"><span class="pre">team()</span></code> methods can accept the names of leagues and teams respectively, but <code class="docutils literal notranslate"><span class="pre">player()</span></code> and <code class="docutils literal notranslate"><span class="pre">match()</span></code> must receive an id number.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">understatapi</span> <span class="kn">import</span> <span class="n">UnderstatClient</span>

<span class="n">understat</span> <span class="o">=</span> <span class="n">UnderstatClient</span><span class="p">()</span>
<span class="c1"># get data for every player playing in the Premier League in 2019/20</span>
<span class="n">league_player_data</span> <span class="o">=</span> <span class="n">understat</span><span class="o">.</span><span class="n">league</span><span class="p">(</span><span class="n">league</span><span class="o">=</span><span class="s2">&quot;EPL&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get_player_data</span><span class="p">(</span><span class="n">season</span><span class="o">=</span><span class="s2">&quot;2019&quot;</span><span class="p">)</span>
<span class="c1"># Get the name and id of one of the player</span>
<span class="n">player_id</span><span class="p">,</span> <span class="n">player_name</span> <span class="o">=</span> <span class="n">league_player_data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;id&quot;</span><span class="p">],</span> <span class="n">league_player_data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;player_name&quot;</span><span class="p">]</span>
<span class="c1"># Get data for every shot this player has taken in a league match (for all seasons)</span>
<span class="n">player_shot_data</span> <span class="o">=</span> <span class="n">understat</span><span class="o">.</span><span class="n">player</span><span class="p">(</span><span class="n">player</span><span class="o">=</span><span class="n">player_id</span><span class="p">)</span><span class="o">.</span><span class="n">get_shot_data</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">understatapi</span> <span class="kn">import</span> <span class="n">UnderstatClient</span>

<span class="n">understat</span> <span class="o">=</span> <span class="n">UnderstatClient</span><span class="p">()</span>
<span class="c1"># get data for every league match involving Manchester United in 2019/20</span>
<span class="n">team_match_data</span> <span class="o">=</span> <span class="n">understat</span><span class="o">.</span><span class="n">team</span><span class="p">(</span><span class="n">team</span><span class="o">=</span><span class="s2">&quot;Manchester_United&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get_match_data</span><span class="p">(</span><span class="n">season</span><span class="o">=</span><span class="s2">&quot;2019&quot;</span><span class="p">)</span>
<span class="c1"># get the id for the first match of the season</span>
<span class="n">match_id</span> <span class="o">=</span> <span class="n">match_data</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
<span class="c1"># get the rosters for the both teams in that match</span>
<span class="n">roster_data</span> <span class="o">=</span> <span class="n">understat</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">match</span><span class="o">=</span><span class="n">match_id</span><span class="p">)</span><span class="o">.</span><span class="n">get_roster_data</span><span class="p">()</span>
</pre></div>
</div>
<p>You can also use the <code class="docutils literal notranslate"><span class="pre">UnderstatClient</span></code> class as a context manager which closes the session after it has been used, and also has some improved error handling. This is the recommended way to interact with the API.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">understatapi</span> <span class="kn">import</span> <span class="n">UnderstatClient</span>

<span class="k">with</span> <span class="n">UnderstatClient</span><span class="p">()</span> <span class="k">as</span> <span class="n">understat</span><span class="p">:</span>
    <span class="n">team_match_data</span> <span class="o">=</span> <span class="n">understat</span><span class="o">.</span><span class="n">team</span><span class="p">(</span><span class="n">team</span><span class="o">=</span><span class="s2">&quot;Manchester_United&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get_match_data</span><span class="p">()</span>
</pre></div>
</div>
<p>For a full API reference, see <a class="reference external" href="https://collinb9.github.io/understatAPI/">the documentation</a></p>
</section>
<section id="contributing">
<h2>Contributing<a class="headerlink" href="#contributing" title="Permalink to this headline">¶</a></h2>
<p>If you find any bugs in the code or have any feature requests, please make an issue and I’ll try to address it as soon as possible. If you would like to implement the changes yourself you can make a pull request</p>
<ul class="simple">
<li><p>Clone the repo <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">git&#64;github.com:collinb9/understatAPI</span></code></p></li>
<li><p>Create a branch to work off <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">checkout</span> <span class="pre">-b</span> <span class="pre">descriptive_branch_name</span></code></p></li>
<li><p>Make and commit your changes</p></li>
<li><p>Push your changes <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">push</span></code></p></li>
<li><p>Come back to the repo on github, and click on Pull requests -&gt; New pull request</p></li>
</ul>
<p>Before a pull request can be merged the code will have to pass a number of checks that are run using TravisCI. These checks are</p>
<ul class="simple">
<li><p>Check that the code has been formatted using <a class="reference external" href="https://github.com/psf/black">black</a></p></li>
<li><p>Lint the code using <a class="reference external" href="https://github.com/PyCQA/pylint">pylint</a></p></li>
<li><p>Check type annotations using <a class="reference external" href="https://github.com/python/mypy">mypy</a></p></li>
<li><p>Run the unit tests and check that they have 100% coverage</p></li>
</ul>
<p>These checks are in place to ensure a consistent style and quality across the code. To check if the changes you have made will pass these tests run</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install -r requirements.txt
pip install -r test_requirments.txt
chmod +x ci/run_tests.sh
ci/run_tests.sh
</pre></div>
</div>
<p>Don’t let these tests deter you from making a pull request. Make the changes to introduce the new functionality/bug fix and then I will be happy to help get the code to a stage where it passes the tests.</p>
</section>
<section id="versioning">
<h2>Versioning<a class="headerlink" href="#versioning" title="Permalink to this headline">¶</a></h2>
<p>The versioning for this project follows the <a class="reference external" href="https://semver.org/">semantic versioning</a> conventions.</p>
</section>
<section id="todo">
<h2>TODO<a class="headerlink" href="#todo" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Add asynchronous support</p></li>
</ul>
</section>
</section>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Brendan Collins.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>